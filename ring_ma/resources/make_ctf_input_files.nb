(* Content-type: application/mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 6.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       145,          7]
NotebookDataLength[     12166,        303]
NotebookOptionsPosition[     11690,        282]
NotebookOutlinePosition[     12025,        297]
CellTagsIndexPosition[     11982,        294]
WindowFrame->Normal
ContainsDynamic->False*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"MakeFiles", "[", 
   RowBox[{"templateFile_", ",", "flatVals_"}], "]"}], ":=", 
  RowBox[{"(", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Length", "[", 
        RowBox[{"Dimensions", "[", "flatVals", "]"}], "]"}], "\[Equal]", 
       "1"}], ",", "\[IndentingNewLine]", 
      RowBox[{"valString", "=", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"ToString", "[", 
           RowBox[{
            RowBox[{"SetPrecision", "[", 
             RowBox[{"#", ",", "3"}], "]"}], ",", "CForm"}], "]"}], "&"}], 
         ",", "flatVals"}], "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"valString", "=", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"ToString", "[", 
           RowBox[{
            RowBox[{"SetPrecision", "[", 
             RowBox[{"#", ",", "3"}], "]"}], ",", "CForm"}], "]"}], "&"}], 
         ",", "flatVals", ",", 
         RowBox[{"{", "2", "}"}]}], "]"}]}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"nVals", "=", 
     RowBox[{"Length", "[", "flatVals", "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"padSize", "=", 
     RowBox[{
      RowBox[{"Log", "[", 
       RowBox[{"10", ",", 
        RowBox[{"nVals", "+", "1"}]}], "]"}], "//", "Ceiling"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"lastPeriod", "=", 
     RowBox[{
      RowBox[{"StringPosition", "[", 
       RowBox[{"templateFile", ",", "\"\<.\>\""}], "]"}], 
      "\[LeftDoubleBracket]", 
      RowBox[{
       RowBox[{"-", "1"}], ",", "2"}], "\[RightDoubleBracket]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"outFileBase", "=", 
     RowBox[{"StringDrop", "[", 
      RowBox[{"templateFile", ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"lastPeriod", "+", "1"}], ",", 
         RowBox[{"StringLength", "[", "templateFile", "]"}]}], "}"}]}], 
      "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"outFileName", "=", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"outFileBase", "<>", 
        RowBox[{"ToString", "[", 
         RowBox[{"PaddedForm", "[", 
          RowBox[{"i", ",", "padSize", ",", 
           RowBox[{"NumberPadding", "->", 
            RowBox[{"{", 
             RowBox[{"\"\<0\>\"", ",", "\"\<0\>\""}], "}"}]}], ",", 
           RowBox[{"NumberSigns", "->", 
            RowBox[{"{", 
             RowBox[{"\"\<\>\"", ",", "\"\<\>\""}], "}"}]}]}], "]"}], "]"}], 
        "<>", "\"\<.in\>\""}], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "1", ",", "nVals"}], "}"}]}], "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"file", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"templateFile", ",", "\"\<Lines\>\""}], "]"}]}], ";", "\n", 
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "1"}], ",", " ", 
      RowBox[{"i", "\[LessEqual]", "nVals"}], ",", 
      RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
      RowBox[{"Export", "[", 
       RowBox[{
        RowBox[{
        "outFileName", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}],
         ",", "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "[", 
            RowBox[{"Dimensions", "[", "flatVals", "]"}], "]"}], "\[Equal]", 
           "1"}], ",", "\[IndentingNewLine]", 
          RowBox[{"Map", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"StringReplace", "[", 
              RowBox[{"#", ",", 
               RowBox[{"\"\<TARGET1\>\"", "\[Rule]", 
                RowBox[{
                "valString", "\[LeftDoubleBracket]", "i", 
                 "\[RightDoubleBracket]"}]}]}], "]"}], "&"}], ",", "file"}], 
           "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"Map", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"StringReplace", "[", 
              RowBox[{"#", ",", 
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"\"\<TARGET1\>\"", "\[Rule]", 
                  RowBox[{"valString", "\[LeftDoubleBracket]", 
                   RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]}], ",", 
                 
                 RowBox[{"\"\<TARGET2\>\"", "\[Rule]", 
                  RowBox[{"valString", "\[LeftDoubleBracket]", 
                   RowBox[{"i", ",", "2"}], "\[RightDoubleBracket]"}]}]}], 
                "}"}]}], "]"}], "&"}], ",", "file"}], "]"}]}], "]"}], ",", 
        "\[IndentingNewLine]", "\"\<Lines\>\""}], "]"}]}], 
     "\[IndentingNewLine]", "]"}]}], ")"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FlatTabWithDelta", "[", 
   RowBox[{"x0_", ",", "y0_", ",", "delta_"}], "]"}], ":=", 
  RowBox[{"Flatten", "[", 
   RowBox[{
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"10", "^", "x"}], ",", 
        RowBox[{"10", "^", "y"}]}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"x", ",", 
        RowBox[{"x0", "-", "delta"}], ",", 
        RowBox[{"x0", "+", "delta"}]}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"y", ",", 
        RowBox[{"y0", "-", "delta"}], ",", 
        RowBox[{"y0", "+", "delta"}]}], "}"}]}], "]"}], ",", "1"}], 
   "]"}]}]}], "Input",
 CellChangeTimes->{{3.396106925968602*^9, 3.396106947464267*^9}, {
  3.396107296542125*^9, 3.396107296977049*^9}, {3.396107347784392*^9, 
  3.396107355318217*^9}, {3.397989768374988*^9, 3.397989847932454*^9}, {
  3.397990078337977*^9, 3.397990078748839*^9}, {3.39844530747896*^9, 
  3.398445316262916*^9}, {3.398445415260277*^9, 3.398445435340359*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"SetDirectory", "[", "\"\</home/helms/raid/ctf/jobs/2007-10-17\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"delta", "=", "2"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FlatTab", "=", 
   RowBox[{"Flatten", "[", 
    RowBox[{
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"10", "^", "x"}], ",", "y"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"x", ",", 
         RowBox[{"-", "10"}], ",", "10"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"y", ",", "1", ",", "10"}], "}"}]}], "]"}], ",", "1"}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FlatTab2", "=", 
   RowBox[{"Table", "[", 
    RowBox[{"1", ",", 
     RowBox[{"{", 
      RowBox[{"x", ",", "1", ",", "25"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"arguments1", "=", 
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"\"\<big.template\>\"", ",", "FlatTab2"}], "}"}], "}"}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.395592317126873*^9, 3.395592372864089*^9}, {
   3.395659474443397*^9, 3.395659477496125*^9}, {3.395750590106142*^9, 
   3.395750618348549*^9}, {3.395750660937957*^9, 3.39575067587762*^9}, {
   3.395750828645546*^9, 3.395750868145685*^9}, {3.395940831577137*^9, 
   3.395940853446103*^9}, {3.395940887729387*^9, 3.395940890386196*^9}, {
   3.396023572338144*^9, 3.396023656837568*^9}, {3.396106779288719*^9, 
   3.396106917380308*^9}, {3.396106965119773*^9, 3.396107000846021*^9}, {
   3.396107063989812*^9, 3.396107064395837*^9}, {3.396107133983983*^9, 
   3.396107172660383*^9}, {3.396107208464739*^9, 3.396107208626818*^9}, {
   3.396107361847323*^9, 3.396107450755954*^9}, {3.396114063870502*^9, 
   3.396114073580105*^9}, {3.397141014593896*^9, 3.39714107199713*^9}, {
   3.39716043647856*^9, 3.397160468150361*^9}, {3.397160580161683*^9, 
   3.397160582444194*^9}, {3.397160615176656*^9, 3.397160622963182*^9}, {
   3.397160684753707*^9, 3.397160718905062*^9}, {3.397211806491474*^9, 
   3.397211940311398*^9}, {3.397212209258695*^9, 3.397212215868896*^9}, {
   3.397212303506102*^9, 3.397212353036547*^9}, {3.397212648732026*^9, 
   3.397212736751843*^9}, {3.397212775552214*^9, 3.397212776474742*^9}, {
   3.39721281648783*^9, 3.397212832069043*^9}, {3.397224219992635*^9, 
   3.397224281902398*^9}, {3.397311223895148*^9, 3.397311377776636*^9}, {
   3.397909374261311*^9, 3.397909409449334*^9}, {3.397989862619821*^9, 
   3.39799005154083*^9}, {3.39799008830023*^9, 3.397990110577976*^9}, {
   3.39799015594582*^9, 3.39799017734395*^9}, {3.398445327422625*^9, 
   3.398445406494201*^9}, {3.398445437650918*^9, 3.398445537482044*^9}, 
   3.398445749370686*^9, {3.399029824762604*^9, 3.399029989431897*^9}, {
   3.399894156399695*^9, 3.39989427639272*^9}, {3.399980054849445*^9, 
   3.39998005604746*^9}, {3.401186825180285*^9, 3.401186864143679*^9}, {
   3.401186894382329*^9, 3.40118689491189*^9}, {3.401642916365916*^9, 
   3.401642926017372*^9}}],

Cell[BoxData["\<\"/a/lnx113/nfs/acc/user/helms/ctf/jobs/2007-10-17\"\>"], \
"Output",
 CellChangeTimes->{
  3.395592376026946*^9, 3.395659484212169*^9, 3.395750689222179*^9, 
   3.39575086910458*^9, 3.395940835306087*^9, {3.395940868019521*^9, 
   3.395940890893339*^9}, 3.396023663120695*^9, {3.396106793464614*^9, 
   3.396106871231359*^9}, {3.396106958340788*^9, 3.396107001524202*^9}, {
   3.396107044709555*^9, 3.396107065183945*^9}, {3.396107151235624*^9, 
   3.396107173418424*^9}, 3.396107209455704*^9, {3.39610742349278*^9, 
   3.396107451327588*^9}, 3.396114098125615*^9, {3.397141043666105*^9, 
   3.397141072943082*^9}, 3.397160470687732*^9, 3.397160583312686*^9, 
   3.397160623484242*^9, 3.397160688503083*^9, 3.397160719689936*^9, 
   3.397212777835533*^9, 3.397212833867732*^9, 3.397224289968979*^9, 
   3.397311381002109*^9, {3.397990082550672*^9, 3.397990112045162*^9}, {
   3.397990157958477*^9, 3.397990179239517*^9}, {3.398445740958504*^9, 
   3.398445749666507*^9}, 3.399030028742188*^9, {3.399894222663354*^9, 
   3.39989422782638*^9}, {3.399894262041387*^9, 3.399894276762137*^9}, 
   3.399980081176232*^9, 3.399983077208043*^9, 3.401186856587181*^9, 
   3.401186897040319*^9, {3.40164290434472*^9, 3.401642926937935*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Map", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"MakeFiles", "[", 
     RowBox[{
      RowBox[{"#", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
      ",", 
      RowBox[{"#", "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]}], 
     "]"}], "&"}], ",", "arguments1"}], "]"}]], "Input",
 CellChangeTimes->{
  3.398445752792304*^9, 3.399030032625539*^9, {3.399894285955348*^9, 
   3.399894286303163*^9}}],

Cell[BoxData[
 RowBox[{"{", "Null", "}"}]], "Output",
 CellChangeTimes->{
  3.395592383275884*^9, 3.395659488405869*^9, 3.395749518343056*^9, 
   3.395750696879884*^9, 3.395750875115991*^9, 3.395940900090569*^9, 
   3.396023680342507*^9, 3.396107440861287*^9, 3.396114108532957*^9, {
   3.397141068305809*^9, 3.397141091214643*^9}, 3.397160766044976*^9, 
   3.397212785904242*^9, 3.397212843955501*^9, 3.397224307795708*^9, 
   3.397311415456647*^9, 3.397311502463551*^9, {3.397990137899472*^9, 
   3.39799018955643*^9}, 3.398445772334128*^9, 3.399030038005889*^9, {
   3.399894281871225*^9, 3.399894292315273*^9}, 3.399980085894493*^9, 
   3.399984019671472*^9, 3.401186899852393*^9, 3.401202631666586*^9, 
   3.401642930234173*^9}]
}, Open  ]]
},
WindowSize->{800, 746},
WindowMargins->{{182, Automatic}, {30, Automatic}},
FrontEndVersion->"6.0 for Linux x86 (32-bit) (April 20, 2007)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[568, 21, 5610, 143, 517, "Input"],
Cell[CellGroupData[{
Cell[6203, 168, 3006, 60, 121, "Input"],
Cell[9212, 230, 1246, 18, 31, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[10495, 253, 443, 12, 32, "Input"],
Cell[10941, 267, 733, 12, 31, "Output"]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
