(* Content-type: application/mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 6.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       145,          7]
NotebookDataLength[     10388,        251]
NotebookOptionsPosition[      9970,        233]
NotebookOutlinePosition[     10332,        249]
CellTagsIndexPosition[     10289,        246]
WindowFrame->Normal
ContainsDynamic->False*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[TextData[{
 "This notebook generates input files for use with the ring_ma program.\n\nTo \
use it, create a \"template\" input file where the parameters (either one or \
two) that you wish to scan are replaced with the word \"TARGET1\" or \
\"TARGET2\" respectively. Then define the values for your scan below, and \
pass the template filename and the values to the MakeFiles routine.\n\nThe \
format for the values argument is either a 1xN list or a 2xN list, depending \
on how many parameters your scanning. Therefore, even if your scan is \
conceptually 2D, it must be flattened before passed as an argument. Examples \
are shown below.\n\nIf you want to make scans of multiple template files, \
then you can use ",
 StyleBox["Mathematica",
  FontSlant->"Italic"],
 "'s Map function to thread the MakeFiles function over arrays of filenames \
and values. This is not recommended for the novice ",
 StyleBox["Mathematica",
  FontSlant->"Italic"],
 " user."
}], "Text",
 CellChangeTimes->{{3.405696469120853*^9, 3.405696603744412*^9}, {
  3.405696687008182*^9, 3.405696848222848*^9}, {3.405696899916372*^9, 
  3.405696912042852*^9}, {3.405696998853147*^9, 3.405697063324197*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"MakeFiles", "[", 
   RowBox[{"templateFile_", ",", "flatVals_"}], "]"}], ":=", 
  RowBox[{"(", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Length", "[", 
        RowBox[{"Dimensions", "[", "flatVals", "]"}], "]"}], "\[Equal]", 
       "1"}], ",", "\[IndentingNewLine]", 
      RowBox[{"valString", "=", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"ToString", "[", 
           RowBox[{
            RowBox[{"SetPrecision", "[", 
             RowBox[{"#", ",", "3"}], "]"}], ",", "CForm"}], "]"}], "&"}], 
         ",", "flatVals"}], "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"valString", "=", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"ToString", "[", 
           RowBox[{
            RowBox[{"SetPrecision", "[", 
             RowBox[{"#", ",", "3"}], "]"}], ",", "CForm"}], "]"}], "&"}], 
         ",", "flatVals", ",", 
         RowBox[{"{", "2", "}"}]}], "]"}]}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"nVals", "=", 
     RowBox[{"Length", "[", "flatVals", "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"padSize", "=", 
     RowBox[{
      RowBox[{"Log", "[", 
       RowBox[{"10", ",", 
        RowBox[{"nVals", "+", "1"}]}], "]"}], "//", "Ceiling"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"lastPeriod", "=", 
     RowBox[{
      RowBox[{"StringPosition", "[", 
       RowBox[{"templateFile", ",", "\"\<.\>\""}], "]"}], 
      "\[LeftDoubleBracket]", 
      RowBox[{
       RowBox[{"-", "1"}], ",", "2"}], "\[RightDoubleBracket]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"outFileBase", "=", 
     RowBox[{"StringDrop", "[", 
      RowBox[{"templateFile", ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"lastPeriod", "+", "1"}], ",", 
         RowBox[{"StringLength", "[", "templateFile", "]"}]}], "}"}]}], 
      "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"outFileName", "=", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"outFileBase", "<>", 
        RowBox[{"ToString", "[", 
         RowBox[{"PaddedForm", "[", 
          RowBox[{"i", ",", "padSize", ",", 
           RowBox[{"NumberPadding", "->", 
            RowBox[{"{", 
             RowBox[{"\"\<0\>\"", ",", "\"\<0\>\""}], "}"}]}], ",", 
           RowBox[{"NumberSigns", "->", 
            RowBox[{"{", 
             RowBox[{"\"\<\>\"", ",", "\"\<\>\""}], "}"}]}]}], "]"}], "]"}], 
        "<>", "\"\<.in\>\""}], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "1", ",", "nVals"}], "}"}]}], "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"file", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"templateFile", ",", "\"\<Lines\>\""}], "]"}]}], ";", "\n", 
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "1"}], ",", " ", 
      RowBox[{"i", "\[LessEqual]", "nVals"}], ",", 
      RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
      RowBox[{"Export", "[", 
       RowBox[{
        RowBox[{
        "outFileName", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}],
         ",", "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "[", 
            RowBox[{"Dimensions", "[", "flatVals", "]"}], "]"}], "\[Equal]", 
           "1"}], ",", "\[IndentingNewLine]", 
          RowBox[{"Map", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"StringReplace", "[", 
              RowBox[{"#", ",", 
               RowBox[{"\"\<TARGET1\>\"", "\[Rule]", 
                RowBox[{
                "valString", "\[LeftDoubleBracket]", "i", 
                 "\[RightDoubleBracket]"}]}]}], "]"}], "&"}], ",", "file"}], 
           "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"Map", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"StringReplace", "[", 
              RowBox[{"#", ",", 
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"\"\<TARGET1\>\"", "\[Rule]", 
                  RowBox[{"valString", "\[LeftDoubleBracket]", 
                   RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]}], ",", 
                 
                 RowBox[{"\"\<TARGET2\>\"", "\[Rule]", 
                  RowBox[{"valString", "\[LeftDoubleBracket]", 
                   RowBox[{"i", ",", "2"}], "\[RightDoubleBracket]"}]}]}], 
                "}"}]}], "]"}], "&"}], ",", "file"}], "]"}]}], "]"}], ",", 
        "\[IndentingNewLine]", "\"\<Lines\>\""}], "]"}]}], 
     "\[IndentingNewLine]", "]"}]}], ")"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.396106925968602*^9, 3.396106947464267*^9}, {
  3.396107296542125*^9, 3.396107296977049*^9}, {3.396107347784392*^9, 
  3.396107355318217*^9}, {3.397989768374988*^9, 3.397989847932454*^9}, {
  3.397990078337977*^9, 3.397990078748839*^9}, {3.39844530747896*^9, 
  3.398445316262916*^9}, {3.398445415260277*^9, 3.398445435340359*^9}, {
  3.405696659725222*^9, 3.405696660529007*^9}}],

Cell[BoxData[{
 RowBox[{"SetDirectory", "[", "\"\<PUT YOUR WORKING DIRECTORY HERE\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FlatTab2D", "=", 
   RowBox[{"Flatten", "[", 
    RowBox[{
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"10", "^", "x"}], ",", "y"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"x", ",", 
         RowBox[{"-", "10"}], ",", "10"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"y", ",", "1", ",", "10"}], "}"}]}], "]"}], ",", "1"}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FlatTab1D", "=", 
   RowBox[{"Table", "[", 
    RowBox[{"1", ",", 
     RowBox[{"{", 
      RowBox[{"x", ",", "1", ",", "25"}], "}"}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.395592317126873*^9, 3.395592372864089*^9}, {
   3.395659474443397*^9, 3.395659477496125*^9}, {3.395750590106142*^9, 
   3.395750618348549*^9}, {3.395750660937957*^9, 3.39575067587762*^9}, {
   3.395750828645546*^9, 3.395750868145685*^9}, {3.395940831577137*^9, 
   3.395940853446103*^9}, {3.395940887729387*^9, 3.395940890386196*^9}, {
   3.396023572338144*^9, 3.396023656837568*^9}, {3.396106779288719*^9, 
   3.396106917380308*^9}, {3.396106965119773*^9, 3.396107000846021*^9}, {
   3.396107063989812*^9, 3.396107064395837*^9}, {3.396107133983983*^9, 
   3.396107172660383*^9}, {3.396107208464739*^9, 3.396107208626818*^9}, {
   3.396107361847323*^9, 3.396107450755954*^9}, {3.396114063870502*^9, 
   3.396114073580105*^9}, {3.397141014593896*^9, 3.39714107199713*^9}, {
   3.39716043647856*^9, 3.397160468150361*^9}, {3.397160580161683*^9, 
   3.397160582444194*^9}, {3.397160615176656*^9, 3.397160622963182*^9}, {
   3.397160684753707*^9, 3.397160718905062*^9}, {3.397211806491474*^9, 
   3.397211940311398*^9}, {3.397212209258695*^9, 3.397212215868896*^9}, {
   3.397212303506102*^9, 3.397212353036547*^9}, {3.397212648732026*^9, 
   3.397212736751843*^9}, {3.397212775552214*^9, 3.397212776474742*^9}, {
   3.39721281648783*^9, 3.397212832069043*^9}, {3.397224219992635*^9, 
   3.397224281902398*^9}, {3.397311223895148*^9, 3.397311377776636*^9}, {
   3.397909374261311*^9, 3.397909409449334*^9}, {3.397989862619821*^9, 
   3.39799005154083*^9}, {3.39799008830023*^9, 3.397990110577976*^9}, {
   3.39799015594582*^9, 3.39799017734395*^9}, {3.398445327422625*^9, 
   3.398445406494201*^9}, {3.398445437650918*^9, 3.398445537482044*^9}, 
   3.398445749370686*^9, {3.399029824762604*^9, 3.399029989431897*^9}, {
   3.399894156399695*^9, 3.39989427639272*^9}, {3.399980054849445*^9, 
   3.39998005604746*^9}, {3.401186825180285*^9, 3.401186864143679*^9}, {
   3.401186894382329*^9, 3.40118689491189*^9}, {3.401642916365916*^9, 
   3.401642926017372*^9}, {3.405696679023503*^9, 3.405696679764719*^9}, {
   3.405696879468536*^9, 3.405696885872259*^9}, {3.405696922274512*^9, 
   3.405696956479202*^9}}],

Cell[BoxData[
 RowBox[{"MakeFiles", "[", 
  RowBox[{"\"\<TEMPLATE FILE\>\"", ",", "FlatTab1D"}], "]"}]], "Input",
 CellChangeTimes->{
  3.398445752792304*^9, 3.399030032625539*^9, {3.399894285955348*^9, 
   3.399894286303163*^9}, {3.40569694751611*^9, 3.405696982378494*^9}}]
},
AutoGeneratedPackage->None,
WindowSize->{800, 891},
WindowMargins->{{182, Automatic}, {3, Automatic}},
FrontEndVersion->"6.0 for Linux x86 (32-bit) (April 20, 2007)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[568, 21, 1186, 21, 251, "Text"],
Cell[1757, 44, 5034, 125, 473, "Input",
 InitializationCell->True],
Cell[6794, 171, 2894, 53, 77, "Input"],
Cell[9691, 226, 275, 5, 32, "Input"]
}
]
*)

(* End of internal cache information *)
