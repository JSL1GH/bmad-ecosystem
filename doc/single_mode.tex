\chapter{Single Mode}
\label{c:single}

In \vn{single mode} each key stroke is interpreted by \tao without the user haing to press 
the carriage control key (there are a few exceptions which are noted below). From \vn{line mode}
use the \vn{single_mode} command to get into \vn{single_mode}. To go back to \vn{line mode} type
"\vn{Z}".

Key bindings are established via the \vn{key_bindings} initialization namelist 
(See Section~\ref{s:init_single}). 
The variables are divided into banks of 10. The 0\Th bank uses variables 1
through 10 the 1\St bank uses variables 11 through 20, etc. 
At any one time only one bank is active. The relationship between
the keys and a change in a variable is:
\begin{example}
                 Change by factor of:          
     Variable    -10  -1    1   10
   ----------    ---  ---  ---  ---
    1 + 10*ib     Q    q    1    !   
    2 + 10*ib     W    w    2    @    
    3 + 10*ib     E    e    3    \#   
    4 + 10*ib     R    r    4    \$   
    5 + 10*ib     T    t    5    %   
    6 + 10*ib     Y    y    6    ^   
    7 + 10*ib     U    u    7    \&
    8 + 10*ib     I    i    8    *   
    9 + 10*ib     O    o    9    (   
   10 + 10*ib     P    p    0    )   
\end{example}
In the above table ib is the bank number (0 for the 0\Th bank, etc.), 
and the change is in
multiples of the \vn{delta} for a variable as specified in the \vn{key_bindings}
namelist. Initially the 0Th bank is active. The
left arrow and right arrow are used to decrease or increase the bank number. 
Additionally the "<" and ">" keys can be used to change the deltas for the variables. 

%------------------------------------------------------------------------
\section{List of Key Strokes}
\label{s:keys}

\begin{description}
\item[?]
Type a short help message.

\item[z] 
Go back to \vn{line mode}

\item[Z] 
Exit \tao
                                        
\item[g]
Go run the default optimizer. The optimizer will run until you type a 
'.' (a period).
Periodically during the optimization the variable values
will be written to files, one for each universe, whose name is 
\vn{tao_opt_vars\#.dat}. where \vn{\#} is the universe number.

\item[G <optimizer>]
Go run the optimizer with name \vn{<optimizer>}.

\item[s]  
Show various parameters.

\item[v <digit> <value>]
Set variable value. <digit> is between 0 and 9 corresponding
to a variable of the current bank. <value>] is the value to set the
variable to.

\item[<]
Reduce the deltas (the amount that a variable is changed when you use the
keys 0 through 9) of all the variables by a factor of 2.

\item[>]
Increase the deltas (the amount that a variable is changed when you use
the keys 0 through 9) of all the variables by a factor of 2.

\item[left\_arrow]
Shift the active key bank down by 1: ib -> ib - 1

\item[right\_arrow]
Shift the active key bank up by 1: ib -> ib + 1

\item[up\_arrow]
Scale plots by a factor of 0.5.

\item[down\_arrow]
Scale plots by a factor of 2.

\item[<CR>]
Do nothing but replot.

\item[/b] 
Read in the default BMAD input file.
The name of the default input BMAD file is given by p%bmad2_file.  Note: This
file cannot define a new lattice. It can only set lattice variables (such as
quad strengths etc.).

\item[/B <file\_name>]   
Read in a BMAD input file whose name is given by \vn{<file_name>}. See the
"/b" command for more details. If the first character of \vn{<file_name>} is
"@" then the "@" is stripped from  \vn{<file_name>} and p%bmad2_file is set to
\vn{<file_name>}.

\item[/e <Index or Name>]
Prints info on a lattice element. If there are two lattices being used
and only the information of an element from one particular lattice is wanted
then after the name or index put ":n" where n is the lattice index.

\item[/l]
Print a the lattice elements with twiss parameters.

\item[/p]
Create a postscript file of the plot window.
p%hardcopy_str is inserted in the PS file that is generated and can be
used to scale, translate and rotate the plot.

\item[/P]
Create a hardcopy of the plot window.
p%print_command needs to be set to the system print command.
p%hardcopy_str is inserted in the PS file that is generated and can be
used to scale, translate and rotate the plot.

\item[/t]
Read a TOAD input file. The file name is given by p%top2_file. The format for
this file is the same as the input file used to start TOAD. This command is
useful for setting parameters that you can not set any other way (like
changing the constraint list). Note that on input p%top2_file is set to the
file name used to start the TOAD.

\item[/T <file\_name>]
Read a TOAD input file whose name is given by \vn{<file_name>}.
See the "/t" command for more details.
If the first character of \vn{<file_name>} is "@" then the "@" is stripped
from  \vn{<file_name>} and p%top2_file is set to \vn{<file_name>}.

\item[/w]
Write both manual and auto variable values to the default output file. 
The default output file name is set by p%manual_out_file. This file is in
BMAD format and you can use the "/b" or "/B" commands to read such a file into
TOAD.

\item[/W <file\_name>]
Write both manual and auto variable values to a file named
\vn{<file_name>}. See the "/w" command for more details.
If the first character of \vn{<file_name>} is "@" then the "@" is stripped
from  \vn{<file_name>} and p%manual_out_file is set to \vn{<file_name>}. 

\item[/x <min> <max>]
Set the horizontal scale (longitudinal position) min and max values for all
the plots. This is the same as setting p%x%min and p%x%max in the TOAD input
file. The effective min and max can never be larger than the bounds of the
lattice itself. Thus to see the entire lattice set min = 0 and max = something
large. Typing a "<cr>" after typing "/x" will set min = 0 and max = 1e20.

\item[/right\_arrow]
Set saved ("value0") values to variable values to saved values. 
The saved values (the value0 column in the display) are initially set to  the
initial value on startup. There are saved values for both the manual and
automatic variables. Note that reading in a TOAD input file will reset the
saved values. If you want to save the values of the variables in this case use
"/w" to save to a file. Use the "\vn{/left_arrow}" command to go in the
reverse direction.

\item[/left\_arrow]
Paste saved ("value0") values back to the variable values. 
The saved values (the value0 column in the display) are initially set to the
initial value  on startup. Use the "\vn{/right_arrow}" command to go in the
reverse direction.

\item[/<digit> up\_arrow]
Scale the plot given by <digit> by a factor of 0.5. The bottom most plot
is number 1, etc. 

\item[/<digit> down\_arrow]
Scale the plot given by <digit> by a factor of 2. The bottom most plot is
number 1, etc. 

\item[/<digit>: <min> <max>]
Set the min and max values for the plot given by <digit> to <min>
and <max>. The bottom most plot is number 1, etc. Notice that by
necessity there must be a space between "<min>" and "<max>" and
that you must type a <CR> at the end.

\item[-p]
Toggle plotting. Whether to plot or not to plot is initially determined by
plot%enable.

\end{description}
