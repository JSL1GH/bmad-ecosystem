\chapter{Global Parameters}

\bmad has various global parameters which affect various
calculations that \bmad performs. A given program may give the user
access to some of these parameters so, in order to allow the intelligent
setting of these parameters, this chapter gives an in-depth description.

A set of global parameters are grouped that affect a particular type
of calculation are grouped into \vn{``structures''}. Each
structure has a \vn{``type name''} which the user can ignore but is 
important to programmers and an \vn{``instance name''} which is what the
user uses to refer to this \vn{structure}.

%-----------------------------------------------------------------
\section{CSR Parameters}
\label{s:csr_params}

The Coherent Synchrotron Radiation (CSR) calculation is discussed in
Section~\sref{s:csr}. The CSR parameter structure has a \vn{type name}
of \vn{csr_common_struct} and an \vn{instance name} of \vn{csr_com}.
This structure has components
\begin{example}
  type csr_common_struct 
    real(rp) :: ds_track_step = 0          ! Tracking step size
    real(rp) :: beam_chamber_height = 0    ! Used in shielding calculation.
    real(rp) :: sigma_cutoff = 0.1         ! Cutoff for the lsc calc. If a bin sigma
                                           !  is < cutoff * sigma_ave then ignore.
    integer :: n_bin = 0                   ! Number of bins used
    integer :: particle_bin_span = 2       ! Longitudinal particle length / dz_bin
    integer :: n_shield_images = 0         ! Chamber wall shielding. 0 = no shielding.
    logical :: lcsr_component_on = .true.  ! Longitudinal csr component
    logical :: lsc_component_on = .true.   ! Longitudinal space charge component
    logical :: tsc_component_on = .true.   ! Transverse space charge component
    logical :: small_angle_approx = .true. ! Use lcsr small angle approximation?
  end type
\end{example}
The values for the various quantities shown above are their default values. 

\vn{ds_track_step} is the nominal longitudinal distance traveled by
the bunch between CSR kicks. The actual distance between kicks within
a lattice element is adjusted so that there is an integer number of
steps from steps from the element entrance to the element
exit. An error will result if \vn{ds_track_step} is not set to a positive value.

\vn{beam_chamber_height} is the height of the beam chamber 
