#---- bmad_def ----
#
# Define BMAD specific environment variables;
# to be used by csh-like shells: csh,tcsh.
# (Sh, ksh, bash should use bmad_defs)
#
#!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!#
# IMPORTANT NOTE:  The first non-comment line of this script #
#                  contains the default path to the local    #
#                  bmad distribution.  It should be edited   #
#                  accordingly.  It is, however, set up such #
#                  that the user can override the default    #
#                  value at the command line to get started. #
#!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!#
#
# Derived from the CLEO cleodef script 
# M. Palmer
#
# Usage in .login:
#
#   source <PATH>/bmad_def
#
# Can define aliases in .login or .xxxrc files, e.g.:
#   alias bmad_setup "source <PATH>/bmad_def" 
#
# where <PATH> is the path to the installed location.  
# <PATH> normally should be equivalent to
#
#   <PATH>=${BMAD_BIN}
#
# (please see BMAD_BIN definition below)
#
#-------------------------------------
#
# Specify BMAD distribution area
#
# THE FOLLOWING LINE SHOULD BE MODIFIED TO REFLECT THE 
# USER'S LOCAL INSTALLATION

setenv BMAD_ /home/mcr/tmp/dist_testing/bmad_dist

#
# Specify the BMAD distribution bin directory
#
set BMAD_BIN=${BMAD_}/bin

#
# Get platform/OS tags
#

set PLATFORM_TAG="`uname -s | cut -d- -f1`_`uname -p`"
set SYSTEM_TAG="`uname -s | cut -d- -f1`"

# Set BMAD fortran compiler:
# BMADF90 = intel (or lahey, hp, absoft, ibm, gfortran)
# intel    -- ifort          default on Linux_i686
# lahey    -- lf95           supported on Linux_i686
# hp       -- f77/f90/f95    default on OSF1_alpha
# ibm      -- xlf
# absoft   -- f95
# gfortran -- gfortran
#

if ( "${PLATFORM_TAG}" == "Linux_i686" ) then
  setenv BMADF90 gfortran
else if ( "${PLATFORM_TAG}" == "OSF1_alpha" ) then
  setenv BMADF90 gfortran
else if ( "${SYSTEM_TAG}" == "Darwin" ) then
  setenv BMADF90 gfortran
else 
  setenv PLATFORM_TAG Linux_i686
  setenv BMADF90 gfortran
endif

setenv PLATFORM_TAG Linxxx


if ( "${SYSTEM_TAG}" == "Darwin" ) then
  if ( $?BMADF90    == 0 ) setenv BMADF90 gfortran
endif


# Uncomment a line here to change the platform specific default compiler
#
# setenv BMADF90 gfortran
# setenv BMADF90 intel



#
# Set flag to enable use of PLPLOT for distrubution builds
#
set USE_PLPLOT Y


#
# Source the BMAD environment script
#
if ( $?BMADENV    == 0 ) setenv BMADENV ${BMAD_BIN}/bmadenv
if ( -f $BMADENV )  then
	source $BMADENV
else
	echo File $BMADENV not found.
endif

#
#-----  Add BMAD distribution bin area to user's PATH if not already present ----
#
set PATH_LIST=`echo ${PATH} | sed s/:/\ /g`
set found=0
foreach dir (${PATH_LIST})
  if ( "${dir}" == "${BMAD_BIN}" ) set found=1
end
if ( $found == 0 ) setenv PATH ${PATH}:${BMAD_BIN}

unsetenv    BMADF90
unsetenv    BMADENV


#------  Check for presence of MPI on build machine ------
#------    In two default paths only                ------
[ -e /usr/include/lam/mpif.h ] || [ -e /usr/include/mpif.h ]
if ( $? == 0 ) then
  setenv MPI TRUE
else
  setenv MPI FALSE
endif


