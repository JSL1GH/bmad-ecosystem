no_digested

beginning[beta_a]  = 10  
beginning[beta_b]  = 12

parameter[lattice_type] = linear_lattice
beginning[e_tot]  = 7e6
beam_start[x] = 1e-4
beam_start[px] = 0e-4

! Branch 0

bend: sbend, rho = 1, angle = pi/10, y_pitch = 1e-4, ref_tilt = 1.5, roll = 2e-4,
          x_offset = 0.1, y_offset = 0.2
bend2: bend
bend3: bend, rho = 1, angle = 1, b1 = 1

m: marker, superimpose, ref = bend, offset = 0.1
m3: marker, superimpose, ref = bend3

lat: line = (bend, bend2, bend3)

! branch 1

sol: solenoid, ks = 0.3, l = 1
s: sextupole, k2 = 0.7, l = 1, ds_step = 0.01
b: sbend, angle = 0.3, l = 1, e1 = 0.1

lat1: line = (sol, s, b)
lat1[e_tot] = 7e6
lat1[beta_a]  = 10  
lat1[beta_b]  = 12
lat1[eta_x]   =  1.3
lat1[etap_x]  =  0.1

! branch 2

e_tot = 5e6
lc: lcavity, l = 2, voltage = e_tot, phi0 = 0

lat2: line = (lc)
lat2[e_tot] = e_tot
lat2[beta_a]  = 20  
lat2[beta_b]  = 12
lat2[eta_x]   =  1.3
lat2[etap_x]  =  0.1

!

use, lat, lat1, lat2

