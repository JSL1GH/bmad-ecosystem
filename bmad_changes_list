controller:
	cc: control = {q[k1]=2.7*#, ...}, attrib = k1, absolute = T

0) Just add nonlinearities to overlay/group ????!!!

1) Add structure to control_struct:

type eval_stack_struct
	integer type
	real(rp) value
end type

type control_struct
	type (eval_stack_struct), allocatable :: stk(:)
	... etc ...
end type


2) lat_equal_lat needs to be modified
3) read/write_bmad_digested_file
4) version number increase
5) type2_ele
6) bmad_parser
7) a) Split off stack evaluation from evaluate_value
	 b) Pass value of "#"
8) controller bookkeeper
9) controller_lord
10) overlay_slave$ -> controller_slave$ (but retain overlay_slave$ for back compatability?)
11) Save defined variables in lat_struct? Yes!

----------------------------------

Python(x,y) / Qt front end for gui/graphics

http://www.pythonxy.com/foreword.php

Rapid GUI Programming with Python and QtÓ, Mark Summerfield, Ed.: Prentice Hall, ISBN-13: 978-0-13-235418-9.

Python Scripting for Computational ScienceÓ, Hans Petter Langtangen, Ed.: Springer, ISBN-13: 978-3-540-73915-9.

----------------------------------

Symplectic integration for lcav !?

implement bmad_standard bend_sol_quad

finish bmad_standard doc.

a0/b0 -> a_1/b_1

Take out setting of bmad_struct%ok and replace this with added "err" subroutine argument.

Convert all print statements to out_io

Put RF on warning in 
  b) twiss_propagate1  ?!
  c) twiss_at_start    ?!

Structure name changes:
	bmad_com  --> bmad_parameters
	etc...

Enable overlay to control:
	aperture
	x_limit
	y_limit

enable reading in sigmas in bmad_parser & xsif_parser

emittance, emitt -> emit
[Remember bmadz, etc.]

pointers -> allocatable in ele_struct, lat_struct, etc.

-----------------

multipass with a reversed line and superimpose does the wrong thing:
  b: marker, superimpose, ref = a, offset = 1
  a: quad, l = 3
  lm: line[multipass] = (a)
  out: line = (lm, -lm)
  use, out
produces:
 List:                                 Key                 Length         S
   1) A\1\1                            QUADRUPOLE            2.50      2.50
   2) B\1                              MARKER                0.00      2.50
   3) A\1\2                            QUADRUPOLE            0.50      3.00
   4) A\2\1                            QUADRUPOLE            2.50      5.50
   5) B\2                              MARKER                0.00      5.50
   6) A\2\2                            QUADRUPOLE            0.50      6.00
 ---- Lord Elements ----
     7) A                                QUADRUPOLE            3.00      0.00
     8) A\2                              QUADRUPOLE            3.00      6.00
     9) A\1                              QUADRUPOLE            3.00      3.00
    10) B                                MARKER                0.00      0.00
Note that A\2\1 should be 0.5 m long.
Also: e1/e2 for a bend should be reversed.

Solution: 
	1) Put in element structure a reversed logical.
	2) Read & write digested needs to be modified.
	3) superimpose s_calc needs to take the reversed logical into account.
	4) multipass slave keeping must know to reverse e1/e2.
	5) reverse wiggler terms in bmad_parser.
	6) revise type2_ele to print the reverse logical.

-----------------

add function to calc: ring%param%s_start
add function to calc: ring%param%s_end

-----------------

*) Bmad/CesrV/tao_cesr
    Change phase data files to incude "raw" a/b-mode x_amp, y_amp, x_phase, y_phase numbers
      Remake old phase files to include this?

*) tao
    add branch stuff

*) Branch:
  a) track_all & 
  b) lat_mat6 calc with branch.
  c) twiss propagate
  d) emit calc
  e) doc

*) aml/uap

