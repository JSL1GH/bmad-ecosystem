\documentclass{book}
\usepackage{graphicx}

%\makeatletter    % internal ``@'' commands can now be used. 
%\@addtoreset{chapter}{part}
%\makeatother     % Internal ``@'' commands are locked.
%\renewcommand{\thechapter}{\thepart.\arabic{chapter}}

%----------------------------------------------------------------

\begin{document}

\title{The BMAD Reference Manual}

\date{11 June, 2003}
\maketitle

%----------------------------------------------------------------
\section*{Overview}

BMAD (aka "Baby MAD" or "Better MAD" or just plain "BE MAD!")
is a software subroutine library used for simulating 
relativistic charged--particle dynamics in high energy accelerators
and storage rings. BMAD can be used to read in lattice files, compute 
Twiss parameters, track particles, etc. 
These subroutines, written in  Fortran90, have been developed to:
\begin{enumerate}
\item Cut down on the time needed to develop programs,
\item Cut down on programming errors, and
\item Provide a standard input format for specifying lattices.
\end{enumerate}
BMAD has been developed at Cornell University's Laboratory for Elementary
Particle Physics and has been in use since the 1990's.

\break
%----------------------------------------------------------------
\section*{Introduction}

The strength of BMAD is that as a subroutine library it provides a flexible
framework from which sophisticated simulation programs may easily be developed.
The weakness of BMAD comes from its strength: Someone must put the pieces 
together into a program. As a consequence this manual serves two masters:

The BMAD lattice input standard was developed using the MAD lattice input 
standard as a starting point. MAD (Methodical Accelerator Design) is a 
widely used
stand--alone program developed at CERN by Christoph Iselin for charged--particle 
optics calculations. The limitations of the MAD program was the imputus for
writting BMAD. Since it can be convienint to do simulattions with both MAD and
BMAD, differences and simularities between the two input formats are noted in
this guide.

Errors and omissions are a fact of life for any reference work and comments from
you, dear reader, are therefore most welcome. Please send any missives 
(or chocolate, etc.) to:
\begin{tty}
  David Sagan <dcs16@cornell.edu>
\end{tty}


%----------------------------------------------------------------
\tableofcontents

\listoffigures

\listoftables

%----------------------------------------------------------------
%----------------------------------------------------------------
\part{Conventions}

%----------------------------------------------------------------
\chapter{Conventions}


%----------------------------------------------------------------
%----------------------------------------------------------------
\part{Language Reference}


%----------------------------------------------------------------
\chapter{Syntax}

%----------------------------------------------------------------
\chapter{Arithmetic Expressions}

%----------------------------------------------------------------
\chapter{Physical Units and Constants}

%----------------------------------------------------------------
\chapter{Parameters}

%----------------------------------------------------------------
\chapter{Elements}

%----------------------------------------------------------------
\chapter{Element Sequencing}

%----------------------------------------------------------------
\chapter{Superposition of Eleemnts}

%----------------------------------------------------------------
\chapter{Elements Controlling Other Elements}

%----------------------------------------------------------------
\chapter{Tracking Methods}

%----------------------------------------------------------------
\chapter{Transfer Matrix Calculation Methods}

%----------------------------------------------------------------
%----------------------------------------------------------------
\part{Programmer's Guide}

%----------------------------------------------------------------
\chapter{The BMAD Distribution}

When installing BMAD on a computer what one gets is not only the BMAD
subroutine library but additionally subsiderary libraries upon which
subroutines in the BMAD library depend. There are 5 other libraries
that are used: cesr_utils, forest, numerical_recipes, pgplot, and dcslib.
\begin{description}
\item[cesr_utils] This is a small low level library that primarily defines 
the precision that BMAD works at. The name cesr comes about from
historical reasons.
\item[dcslib] This library defines a set of helper routines. 
The name comes from its creator.
\item[forest] This is the FPP/PTC 
(Full Polymorphic Package/ Polymorphic Tracking Code) library of
Etienne Forest that handles Taylor maps to any arbitrary order (this
is also known as Truncated Power Series Algebra (TPSA)) along with Lie
Algebraic Operations. BMAD uses this software to do some calculations
like tracking and making the 6x6 transfer matrices. FPP/PTC is a very
general package and BMAD only makes use of a small part of its
features. See the FPP/PTC documentation at
<http://bc1.lbl.gov/CBP_pages/educational/TPSA_DA/Introduction.html>
for more information.
\item[recipes] Numerical Recipes is a set of subroutines for doing 
scientific computing includeing Runge--Kutta integration, FFT's,
interpolation and extrapolation, etc. The writeup for this library is
the book ``Numberical Recipes, The Art of Scientific Computing''. For
BMAD this library has been modified so that either single or double
precision version may be generated.
\end{description}

BMAD comes in two flavors: A single precision one and a double precision one...


%----------------------------------------------------------------
\chapter{Reading and Writing Lattices}

%----------------------------------------------------------------
\chapter{The Ring\_struct}

Local ring_struct variables must have the save attribute or
the pointers within must be appropriately deallocated
before leaving the routine.

%----------------------------------------------------------------
\chapter{The Ele\_struct}

%----------------------------------------------------------------
\chapter{CESR Centric Routines}

%----------------------------------------------------------------
\chapter{Tracking}

When using radiation excitation the random number generator is based
upon the fortran90 intrinsic random_number. If random_seed is not called
then the fluctuations from run to run will be exactly the same.

%----------------------------------------------------------------
\chapter{Transfer Matrices}

%----------------------------------------------------------------
\chapter{Twiss Parameters}

%----------------------------------------------------------------
\chapter{Interface to FPP/PTC}

%----------------------------------------------------------------
\chapter{Routines Sorted by Functionality}

include dcslib and cesr_utils

%----------------------------------------------------------------
%----------------------------------------------------------------
\part{Physics Notes}

%----------------------------------------------------------------
\chapter{Emittances and Synchrotron Radiaion}



%----------------------------------------------------------------
%----------------------------------------------------------------
\begin{theindex}


\end{theindex}

\end{document}