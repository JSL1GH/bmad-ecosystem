\chapter{Elements}

A lattice for a storage ring or linac is made up of a collection of
elements --- Quadrupoles, Bends, etc. This chapter discusses the
various types of elements available in \bmad.


\section{Bmad Element List}


Most element types available in \mad\ are provided in \bmad.
Additionally, \bmad\ provides a number of element types that are not
available in \mad.  A word of caution: In some cases where both \mad\
and \bmad\ provide the the same element type, there will be an overlap of 
the attributes available but the two sets of attributes will not be the same.
The list of element types known to \bmad\ is shown in Table~\ref{tab:elements}
\begin{table}[h]
\centering
{\tt
\begin{tabular}{|l|l||l|l|} \hline
  {\it Element} & {\it Section}  & {\it Element} & {\it Section} \\ \hline
  ab\_multipole & \ref{s:ab_m}   &  octupole     & \ref{s:oct}   \\ \hline
  beambeam      & \ref{s:bbi}    &  overlay      & \ref{s:over}  \\ \hline
  custom        & \ref{s:custom} &  patch        & \ref{s:patch} \\ \hline
  drift         & \ref{s:drift}  &  quadrupole   & \ref{s:quad}  \\ \hline
  ecollimator   & \ref{s:ecol}   &  rbend        & \ref{s:rbend} \\ \hline
  elseparator   & \ref{s:elsep}  &  rcollimator  & \ref{s:rcol}  \\ \hline
  group         & \ref{s:group}  &  rfcavity     & \ref{s:rfcav} \\ \hline
  hkicker       & \ref{s:hk}     &  sbend        & \ref{s:sbend} \\ \hline
  instument     & \ref{s:inst}   &  sextupole    & \ref{s:sex}   \\ \hline
  kicker        & \ref{s:k}      &  solenoid     & \ref{s:sol}   \\ \hline
  lcavity       & \ref{s:lcav}   &  sol\_quad    & \ref{s:sq}    \\ \hline
  marker        & \ref{s:mark}   &  taylor       & \ref{s:tay}   \\ \hline
  monitor       & \ref{s:mon}    &  vkicker      & \ref{s:vk}    \\ \hline
  multipole     & \ref{s:m}      &  wiggler      & \ref{s:wig}   \\ \hline
\end{tabular}}
\caption{\bmad\ elements.}
\label{tab:elements}\center
\end{table}

\vfil
\break

%-----------------------------------------------------------------
\section{AB\_Multipole}
\label{s:ab_m}

An \vn{AB_Multipole} is a thin lens up to 20th order. The only
difference between this and a \vn{Multipole} is the input format. 

\begin{table}[h]
\centering {
\begin{tabular}{|l|l||l|l|} \hline
  {\sl Attribute} & {\sl Description}  & {\sl Attribute} & {\sl Description} \\ \hline
  tilt         = Real & \ref{s:offset} &  type               = String  & \ref{s:string} \\ \hline
  x\_offset    = Real & \ref{s:offset} &  alias              = String  & \ref{s:string} \\ \hline
  y\_offset    = Real & \ref{s:offset} &  descrip            = String  & \ref{s:string} \\ \hline
  s\_offset    = Real & \ref{s:offset} &  mat6\_calc\_method = Switch  & \ref{s:track}  \\ \hline
  x\_limit     = Real & \ref{s:limit}  &  tracking\_method   = Switch  & \ref{s:track}  \\ \hline
  y\_limit     = Real & \ref{s:limit}  &  is\_on             = Logical & \ref{s:is_on}  \\ \hline
  aperture     = Real & \ref{s:limit}  &  a$n$, b$n$         = Real    & \ref{s:ab}     \\ \hline  
  beam\_energy = Real & \ref{s:energy} &  radius             = Real    & \ref{s:ab}     \\ \hline
\end{tabular}}
\end{table}

%-----------------------------------------------------------------
\section{BeamBeam}
\label{s:bbi}


In \bmad, \vn{x_offset} and \vn{y_offset} are used to offset the
\vn{beambeam} element instead of the \mad\ standard attributes
\vn{xma} and \vn{yma}.
\begin{itemize}
\item For a crossing angle use \vn{x_pitch} and \vn{y_pitch} (This is the full crossing angle,
not the half-angle).
\item \vn{n_slice} is the number of equal charge chunks which the strong beam is sliced.
      Default is \vn{n_slice} = 1.
\item For slicing, you need a non-zero \vn{sig_z}.
\item \vn{charge}=-1: Opposite beam has the opposite charge (default).
\item \vn{charge}=+1: Opposite beam has the same charge.   
\end{itemize}

%-----------------------------------------------------------------
\section{Custom}
\label{s:custom}

%-----------------------------------------------------------------
\section{Drift}
\label{s:drift}

%-----------------------------------------------------------------
\section{Ecollimator}
\label{s:ecol}

%-----------------------------------------------------------------
\section{Elseperator}
\label{s:elsep}

For an \vn{elseparator}, the kick is determined by \vn{hkick} and
\vn{vkick}. The \vn{gap} for an \vn{elseparator} is used to compute
the electric field for a given kick. The voltage is a dependent
attribute determined by:
\begin{example}
  Voltage (V) = kick * E [ev] * gap [m] / L [m] 
\end{example}

%-----------------------------------------------------------------
\section{Group}
\label{s:group}

%-----------------------------------------------------------------
\section{Hkicker}
\label{s:hk}

%-----------------------------------------------------------------
\section{Instrument}
\label{s:inst}

%-----------------------------------------------------------------
\section{Kicker}
\label{s:k}

%-----------------------------------------------------------------
\section{Lcavity}
\label{s:lcav}

%-----------------------------------------------------------------
\section{Marker}
\label{s:mark}

%-----------------------------------------------------------------
\section{Monitor}
\label{s:mon}

%-----------------------------------------------------------------
\section{Multipole}
\label{s:m}

%-----------------------------------------------------------------
\section{Octupole}
\label{s:oct}

%-----------------------------------------------------------------
\section{Overlay}
\label{s:over}

%-----------------------------------------------------------------
\section{Patch}
\label{s:patch}

%-----------------------------------------------------------------
\section{Quadrupole}
\label{s:quad}

%-----------------------------------------------------------------
\section{Rbend}
\label{s:rbend}

%-----------------------------------------------------------------
\section{Rcollimator}
\label{s:rcol}

%-----------------------------------------------------------------
\section{Rfcavity}
\label{s:rfcav}

%-----------------------------------------------------------------
\section{Sbend}
\label{s:sbend}

%-----------------------------------------------------------------
\section{Sextupole}
\label{s:sex}

%-----------------------------------------------------------------
\section{Solenoid}
\label{s:sol}

%-----------------------------------------------------------------
\section{Sol\_Quad}
\label{s:sq}

%-----------------------------------------------------------------
\section{Taylor}
\label{s:tay}

%-----------------------------------------------------------------
\section{Vkicker}
\label{s:vk}

%-----------------------------------------------------------------
\section{Wiggler} 
\label{s:wig}

%-----------------------------------------------------------------
\section{Type, Alias and Descrip Attributes}
\label{s:string}

\vn{Type}, \vn{Alias}, and \vn{Descrip} are labels to be attached 
to an element. \bmad\ does not directly use these labels. \vn{Type}
and \vn{Alias} can be up to 16 characters in length and \vn{Descrip}
can be up to 200 characters in length. The attribute strings should be
enclosed in double quotation marks ("). The attribute strings may
contain blanks. If the attribute string does not contain a blank then
the quotation marks may be omitted. In this case the first comma (,)
or the end of the line marks the end of the string. Example:
\begin{example}
  Q00W: Quad, type = "My Type", alias = Who_knows, &
                                        descrip = "Only the shadow knows"
\end{example}

%-----------------------------------------------------------------
\section{Mat6\_calc\_method and Tracking\_method switches}
\label{s:track}


%-----------------------------------------------------------------
\section{Offsets and Tilt Attrubutes}
\label{s:offset}

\vn{x_offset}, \vn{y_offset}, \vn{s_offset} offset an element from the reference orbit.
\vn{tilt} rotates.

%-----------------------------------------------------------------
\section{Aperture and Limit Attributes}
\label{s:limit}

%-----------------------------------------------------------------
\section{Energy Attribute}
\label{s:energy}

%-----------------------------------------------------------------
\section{Is\_on Attribute}
\label{s:is_on}

%-----------------------------------------------------------------
\section{An, Bn and Radius attributes}
\label{s:ab}

